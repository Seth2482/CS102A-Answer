# CS102A/CS107 Week 8
(Based on the slides from Prof.Yepang LIU(刘烨庞))        

## 1. 理论课内容框架
- 字符编码
- 字符串对象的构建与内存机制 **考点**
- 字符串对象的常用方法
- 字符串不可变性，字符串循环拼接优化与StringBuilder，StringBuffer的使用
- 基本数据类型及其包装类

### 1.1 字符编码

常用的字符编码有以下几种：（了解即可，并非考试重点）        
1. ASCII: 最原始的编码，1个byte，8个bit，共128个字符；
2. Unicode: 统一字符集，3个byte，24个bit，0x000000~0x10FFFF，属于编码扩充，共1100K+种字符，是Java默认的编码方式
3. 万国码: UTF32(定长) UTF16(变长) UTF8(变长) 本质是对Unicode的编码方式
4. GBK: 汉字内码扩展规范，确定对中文的编码

For more details, please refer to EE411: 信息论与编码

指定编码打印字符：```s.getBytes("UTF-8");```

在线学习网站：http://tool.chinaz.com/tools/unicode.aspx

### 1.2 字符串对象的构建与内存机制 考点

**考试考点** 判断，选择，填空都有可能考，而且很容易混，建议认真理解这部分内容！

在Java语言中，字符串有两种可能的存储位置：常量池、堆（其中常量池是堆当中单独划分出来的一片区域）

在Java语言中，获得字符串对象的方法主要有以下两种：

```java
String s1 = "Hello";
String s2 = new String("Hello");
```

这两种初始化字符串对象的方法都可以得到内容为```Hello```的字符串对象，但是这个过程中JVM做了什么事情，是需要各位同学理解并且记忆的！

#### 重点讲解1

先看第一句：
```java
String s1 = "Hello";
```
主要完成的工作是：
1. 检查字符串常量池中有无"Hello"字符串；
2. 发现没找到，于是JVM在字符串常量池中创建字符串对象"Hello"；
3. 返回该常量池中对该字符串对象的引用；

因此，做了这三步以后，才算完成了字符串对象的构建；

如果在运行了第一句后，再来两句：
```java
String s1_ = "Hello";
System.out.println(s1==s1_);
```
此时的结果一定为```true```，因为第二步中：
1. 检查字符串常量池中有无"Hello"字符串；
2. 发现找到了，直接返回该字符串在常量池中的引用给s1_；
因此```s1```和```s1_```指向同一对象，地址相同，所以为```true```

#### 重点讲解2

再看第二句：
```java
String s2 = new String("Hello");
```
主要完成的工作有：
1. 执行重点讲解1的过程以创建常量池中的"Hello"字符串；
2. 在堆中找片区域，申请出来，给s2对象使用，s2指向的内存空间在堆里；
3. 字符串本质上是char数组，s2指向的字符串对象和常量池中"Hello"字符串将共享同一个char数组；


如果在运行了第二句后，再来两句：
```java
String s2_ = new String("Hello");
System.out.println(s2==s2_);
```
此时的结果一定为```false```，因为在刚才的步骤中，s2和s2_在堆中的不同内存区域，所以必定结果为```false```！

（这部分难度会比较大，建议画图展示，并且安排自由提问环节）

### 1.3 字符串对象的常用方法
### 1.4 字符串不可变性，字符串循环拼接优化与StringBuilder，StringBuffer的使用
### 1.5 基本数据类型及其包装类
